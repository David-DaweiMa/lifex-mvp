# LifeX Mobile App

## 功能集成状态

### ✅ 已完成的功能集成

1. **Supabase数据库集成**
   - 完整的数据库客户端配置
   - 类型化的数据库接口
   - 异步存储支持

2. **认证系统**
   - 用户注册/登录
   - 会话管理
   - 用户资料管理
   - 认证状态监听

3. **AI聊天服务**
   - 真实的AI对话功能
   - 推荐系统集成
   - 会话历史管理
   - 匿名用户支持

4. **位置服务**
   - GPS定位
   - 附近商家搜索
   - 位置权限管理
   - 距离计算

5. **商家数据服务**
   - 商家列表获取
   - 搜索功能
   - 分类筛选
   - 缓存机制

## 环境配置

### 1. 环境变量配置

项目使用统一的环境变量配置，所有环境变量都在根目录的 `.env.local` 文件中：

```bash
# 根目录 .env.local 文件已包含所有必要的环境变量
# 包括 Web端 (NEXT_PUBLIC_*) 和移动端 (EXPO_PUBLIC_*) 的配置
```

### 2. 环境变量说明

根目录的 `.env.local` 文件包含：
- **Web端变量**: `NEXT_PUBLIC_*` 前缀
- **移动端变量**: `EXPO_PUBLIC_*` 前缀  
- **服务端变量**: 无前缀（如 `SUPABASE_SERVICE_ROLE_KEY`）

### 3. 启动开发服务器

确保web端API服务器正在运行：
```bash
cd packages/web
npm run dev
```

然后启动移动端：
```bash
cd packages/mobile-new
npm start
```

**注意**: 环境变量会自动从根目录的 `.env.local` 文件加载，无需额外配置。

## 功能说明

### 认证系统
- 支持用户注册和登录
- 自动会话管理
- 用户资料编辑
- 认证状态持久化

### AI聊天
- 与web端相同的AI服务
- 支持推荐和后续问题
- 匿名用户会话管理
- 对话历史缓存

### 位置服务
- 自动请求位置权限
- 获取当前位置
- 附近商家搜索
- 距离计算和显示

### 商家数据
- 从web端API获取数据
- 本地缓存优化
- 搜索和筛选功能
- 收藏功能

## 测试说明

1. **认证测试**
   - 注册新用户
   - 登录现有用户
   - 登出功能
   - 资料编辑

2. **AI聊天测试**
   - 发送消息
   - 接收AI回复
   - 查看推荐
   - 后续问题

3. **位置服务测试**
   - 位置权限请求
   - 获取当前位置
   - 附近商家搜索

4. **商家数据测试**
   - 浏览商家列表
   - 搜索功能
   - 分类筛选
   - 商家详情

## 注意事项

1. 确保web端API服务器正在运行
2. 配置正确的Supabase环境变量
3. 在真实设备上测试位置服务
4. 检查网络连接和API响应

## 下一步开发

1. 添加推送通知
2. 实现离线缓存
3. 优化性能
4. 添加更多UI组件
5. 实现深度链接
